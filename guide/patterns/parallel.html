<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parallel Processing íŒ¨í„´ - Spring AI</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .code-block { background: #2d3748; border-radius: 8px; }
        .copy-button { transition: all 0.2s ease; }
        .copy-button:hover { background-color: #4a5568; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <a href="../../index.html" class="flex items-center text-xl font-bold text-gray-800">
                        <i class="fab fa-spring text-green-600 mr-2"></i>
                        Spring AI Hub
                    </a>
                    <span class="mx-3 text-gray-400">/</span>
                    <a href="../patterns.html" class="text-gray-600 hover:text-gray-800">íŒ¨í„´ ê°€ì´ë“œ</a>
                    <span class="mx-3 text-gray-400">/</span>
                    <span class="text-gray-600">Parallel Processing</span>
                </div>
                <a href="../../index.html" class="text-blue-600 hover:text-blue-800">
                    <i class="fas fa-home"></i> í™ˆìœ¼ë¡œ
                </a>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-4xl font-bold mb-4">âš¡ Parallel Processing íŒ¨í„´</h1>
            <p class="text-gray-600 mb-8">ë³‘ë ¬ ì²˜ë¦¬ë¡œ ì„±ëŠ¥ì„ ê·¹ëŒ€í™”í•˜ëŠ” ë©€í‹° íƒœìŠ¤í¬ íŒ¨í„´</p>

            <!-- Overview -->
            <section class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">ê°œìš”</h2>
                
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <p class="mb-4">
                        Parallel Processing íŒ¨í„´ì€ ë…ë¦½ì ì¸ ì—¬ëŸ¬ AI ì‘ì—…ì„ ë™ì‹œì— ì‹¤í–‰í•˜ì—¬ ì „ì²´ ì²˜ë¦¬ ì‹œê°„ì„ ë‹¨ì¶•í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤. 
                        ì‘ì—… ê°„ ì˜ì¡´ì„±ì´ ì—†ì„ ë•Œ ìµœëŒ€ íš¨ê³¼ë¥¼ ë°œíœ˜í•˜ë©°, ì‹œìŠ¤í…œ ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•©ë‹ˆë‹¤.
                    </p>
                    
                    <div class="bg-green-50 p-4 rounded-lg mb-4">
                        <h3 class="font-semibold mb-2">ì£¼ìš” íŠ¹ì§•:</h3>
                        <ul class="space-y-1">
                            <li>âœ… ë‹¤ì¤‘ ì‘ì—… ë™ì‹œ ì‹¤í–‰ìœ¼ë¡œ ì‹œê°„ ë‹¨ì¶•</li>
                            <li>âœ… CPU/ë©”ëª¨ë¦¬ ìì› íš¨ìœ¨ì  í™œìš©</li>
                            <li>âœ… ì¼ë¶€ ì‘ì—… ì‹¤íŒ¨ ì‹œì—ë„ ë‹¤ë¥¸ ì‘ì—… ê³„ì† ì§„í–‰</li>
                            <li>âœ… ë™ì  ì‘ì—… ë¶„ë°° ë° ë¶€í•˜ ë¶„ì‚°</li>
                            <li>âœ… ê²°ê³¼ ì§‘ê³„ ë° ë³‘í•© ìœ ì—°ì„±</li>
                        </ul>
                    </div>

                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h3 class="font-semibold mb-2">ë³‘ë ¬ ì²˜ë¦¬ ë‹¤ì´ì–´ê·¸ë¨:</h3>
                        <pre class="text-sm font-mono">
ì…ë ¥ ë°ì´í„°
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
    â–¼       â–¼       â–¼       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Task 1 â”‚ â”‚ Task 2 â”‚ â”‚ Task 3 â”‚ â”‚ Task N â”‚
â”‚  ê²€ìƒ‰   â”‚ â”‚  ë¶„ì„   â”‚ â”‚  ìš”ì•½   â”‚ â”‚  ...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚       â”‚       â”‚       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
            â–¼
        ê²°ê³¼ ë³‘í•©
            â–¼
        ìµœì¢… ê²°ê³¼
                        </pre>
                    </div>
                </div>
            </section>

            <!-- Basic Implementation -->
            <section class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">ê¸°ë³¸ êµ¬í˜„</h2>
                
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">ë³‘ë ¬ ì²˜ë¦¬ê¸° êµ¬í˜„</h3>
                    
                    <div class="code-block p-4 relative mb-4">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('parallel-processor')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="parallel-processor"><code class="language-java">@Service
@Slf4j
public class ParallelAIProcessor {
    
    private final ExecutorService executorService;
    private final ChatClient chatClient;
    
    public ParallelAIProcessor() {
        this.executorService = new ForkJoinPool(
            Runtime.getRuntime().availableProcessors(),
            ForkJoinPool.defaultForkJoinWorkerThreadFactory,
            null, true
        );
    }
    
    public <T, R> List<R> processInParallel(
            List<T> inputs, 
            Function<T, R> processor) {
        
        List<CompletableFuture<R>> futures = inputs.stream()
            .map(input -> CompletableFuture.supplyAsync(
                () -> processor.apply(input), 
                executorService
            ))
            .toList();
        
        // ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°
        CompletableFuture<Void> allFutures = CompletableFuture.allOf(
            futures.toArray(new CompletableFuture[0])
        );
        
        try {
            allFutures.get(30, TimeUnit.SECONDS);
        } catch (TimeoutException e) {
            log.warn("Some tasks timed out");
            // ì™„ë£Œëœ ì‘ì—…ë“¤ë§Œ ìˆ˜ì§‘
        }
        
        return futures.stream()
            .map(future -> {
                try {
                    return future.getNow(null);
                } catch (Exception e) {
                    log.error("Task failed", e);
                    return null;
                }
            })
            .filter(Objects::nonNull)
            .toList();
    }
}

// ë‹¤ì¤‘ ì†ŒìŠ¤ ê²€ìƒ‰ ì˜ˆì œ
@Service
public class MultiSourceSearchService {
    
    private final ParallelAIProcessor parallelProcessor;
    private final List<SearchProvider> searchProviders;
    
    public SearchResult searchAllSources(String query) {
        // ëª¨ë“  ê²€ìƒ‰ ì†ŒìŠ¤ì— ë³‘ë ¬ë¡œ ì¿¼ë¦¬
        List<CompletableFuture<List<Document>>> searchFutures = 
            searchProviders.stream()
                .map(provider -> CompletableFuture.supplyAsync(() -> 
                    provider.search(query)
                ))
                .toList();
        
        // ê²°ê³¼ ìˆ˜ì§‘ ë° ë³‘í•©
        CompletableFuture<List<Document>> combinedFuture = 
            CompletableFuture.allOf(searchFutures.toArray(new CompletableFuture[0]))
                .thenApply(v -> searchFutures.stream()
                    .map(CompletableFuture::join)
                    .flatMap(List::stream)
                    .toList()
                );
        
        List<Document> allDocuments = combinedFuture.join();
        
        // ê²°ê³¼ ìˆœìœ„ ì¬ì •ë ¬
        return SearchResult.builder()
            .query(query)
            .documents(rankDocuments(allDocuments))
            .sourceCount(searchProviders.size())
            .totalResults(allDocuments.size())
            .build();
    }
}</code></pre>
                    </div>
                </div>

                <!-- Multi-Model Parallel Processing -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">ë©€í‹° ëª¨ë¸ ë³‘ë ¬ ì²˜ë¦¬</h3>
                    
                    <div class="code-block p-4 relative mb-4">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('multi-model-parallel')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="multi-model-parallel"><code class="language-java">@Service
public class MultiModelService {
    
    private final Map<String, ChatClient> modelClients;
    
    public MultiModelService() {
        this.modelClients = Map.of(
            "gpt-4o", createOpenAIClient(),
            "claude-3", createAnthropicClient(),
            "llama-3", createOllamaClient()
        );
    }
    
    public ModelComparisonResult compareModels(String prompt) {
        Map<String, CompletableFuture<ModelResponse>> futures = 
            modelClients.entrySet().stream()
                .collect(Collectors.toMap(
                    Map.Entry::getKey,
                    entry -> queryModelAsync(entry.getKey(), entry.getValue(), prompt)
                ));
        
        // ì²« ë²ˆì§¸ ì‘ë‹µ ë°˜í™˜ (ê°€ì¥ ë¹ ë¥¸ ëª¨ë¸)
        CompletableFuture<ModelResponse> firstResponse = 
            CompletableFuture.anyOf(futures.values().toArray(new CompletableFuture[0]))
                .thenApply(result -> (ModelResponse) result);
        
        // ëª¨ë“  ì‘ë‹µ ìˆ˜ì§‘
        Map<String, ModelResponse> allResponses = futures.entrySet().stream()
            .collect(Collectors.toMap(
                Map.Entry::getKey,
                entry -> {
                    try {
                        return entry.getValue().get(10, TimeUnit.SECONDS);
                    } catch (Exception e) {
                        return ModelResponse.error(entry.getKey(), e);
                    }
                }
            ));
        
        return ModelComparisonResult.builder()
            .prompt(prompt)
            .fastestResponse(firstResponse.join())
            .allResponses(allResponses)
            .consensusAnswer(findConsensus(allResponses))
            .performanceMetrics(calculateMetrics(allResponses))
            .build();
    }
    
    private CompletableFuture<ModelResponse> queryModelAsync(
            String modelName, 
            ChatClient client, 
            String prompt) {
        
        return CompletableFuture.supplyAsync(() -> {
            long startTime = System.currentTimeMillis();
            
            try {
                String response = client.prompt()
                    .user(prompt)
                    .call()
                    .content();
                
                return ModelResponse.builder()
                    .modelName(modelName)
                    .content(response)
                    .latency(System.currentTimeMillis() - startTime)
                    .success(true)
                    .build();
                    
            } catch (Exception e) {
                return ModelResponse.builder()
                    .modelName(modelName)
                    .error(e.getMessage())
                    .latency(System.currentTimeMillis() - startTime)
                    .success(false)
                    .build();
            }
        });
    }
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Advanced Patterns -->
            <section class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">ê³ ê¸‰ íŒ¨í„´</h2>
                
                <!-- Map-Reduce Pattern -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">Map-Reduce íŒ¨í„´</h3>
                    
                    <div class="code-block p-4 relative mb-4">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('map-reduce-pattern')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="map-reduce-pattern"><code class="language-java">@Service
public class AIMapReduceService {
    
    private final ParallelAIProcessor parallelProcessor;
    private final ChatClient chatClient;
    
    // ëŒ€ìš©ëŸ‰ ë¬¸ì„œ ë¶„ì„ ì˜ˆì œ
    public DocumentAnalysis analyzelargeDocument(String document) {
        // 1. Map: ë¬¸ì„œë¥¼ ì²­í¬ë¡œ ë¶„í• í•˜ê³  ë³‘ë ¬ ë¶„ì„
        List<String> chunks = splitIntoChunks(document, 1000);
        
        List<ChunkAnalysis> chunkAnalyses = parallelProcessor.processInParallel(
            chunks,
            chunk -> analyzeChunk(chunk)
        );
        
        // 2. Reduce: ë¶„ì„ ê²°ê³¼ í†µí•©
        return reduceAnalyses(chunkAnalyses);
    }
    
    private ChunkAnalysis analyzeChunk(String chunk) {
        String analysis = chatClient.prompt()
            .system("ë¬¸ì„œ ì²­í¬ë¥¼ ë¶„ì„í•˜ì—¬ í•µì‹¬ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ì„¸ìš”.")
            .user(u -> u.text("""
                ë‹¤ìŒ í…ìŠ¤íŠ¸ì—ì„œ ì¶”ì¶œí•˜ì„¸ìš”:
                1. ì£¼ìš” ì£¼ì œ
                2. í•µì‹¬ ê°œë…
                3. ì¤‘ìš”í•œ ì‚¬ì‹¤
                4. ê°ì • í†¤
                
                í…ìŠ¤íŠ¸: {chunk}
                """)
                .param("chunk", chunk))
            .call()
            .content();
        
        return parseChunkAnalysis(analysis);
    }
    
    private DocumentAnalysis reduceAnalyses(List<ChunkAnalysis> analyses) {
        // ì£¼ì œ ë¹ˆë„ ê³„ì‚°
        Map<String, Integer> topicFrequency = analyses.stream()
            .flatMap(a -> a.getTopics().stream())
            .collect(Collectors.groupingBy(
                Function.identity(),
                Collectors.summingInt(e -> 1)
            ));
        
        // ì „ì²´ ìš”ì•½ ìƒì„±
        String consolidatedSummary = chatClient.prompt()
            .system("ì—¬ëŸ¬ ë¶„ì„ ê²°ê³¼ë¥¼ í†µí•©í•˜ì—¬ ì „ì²´ ìš”ì•½ì„ ìƒì„±í•˜ì„¸ìš”.")
            .user(u -> u.text("""
                ë‹¤ìŒ ì²­í¬ë³„ ë¶„ì„ ê²°ê³¼ë¥¼ í†µí•©í•˜ì„¸ìš”:
                {analyses}
                
                í†µí•© ìš”ì•½ì—ëŠ” ë‹¤ìŒì´ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤:
                - ì „ì²´ ë¬¸ì„œì˜ ì£¼ìš” ì£¼ì œ
                - í•µì‹¬ ê²°ë¡ 
                - ì¤‘ìš”í•œ í†µì°°
                """)
                .param("analyses", formatAnalyses(analyses)))
            .call()
            .content();
        
        return DocumentAnalysis.builder()
            .mainTopics(extractTopTopics(topicFrequency))
            .summary(consolidatedSummary)
            .concepts(mergeConc epts(analyses))
            .overallSentiment(calculateOverallSentiment(analyses))
            .chunkCount(analyses.size())
            .build();
    }
}

// Fork-Join íŒ¨í„´
@Component
public class ForkJoinAITask extends RecursiveTask<AnalysisResult> {
    
    private static final int THRESHOLD = 100;
    private final List<DataItem> items;
    private final AIAnalyzer analyzer;
    
    @Override
    protected AnalysisResult compute() {
        if (items.size() <= THRESHOLD) {
            // ì§ì ‘ ì²˜ë¦¬
            return analyzer.analyzeItems(items);
        }
        
        // ì‘ì—… ë¶„í• 
        int mid = items.size() / 2;
        ForkJoinAITask leftTask = new ForkJoinAITask(
            items.subList(0, mid), analyzer
        );
        ForkJoinAITask rightTask = new ForkJoinAITask(
            items.subList(mid, items.size()), analyzer
        );
        
        // ë³‘ë ¬ ì‹¤í–‰
        leftTask.fork();
        AnalysisResult rightResult = rightTask.compute();
        AnalysisResult leftResult = leftTask.join();
        
        // ê²°ê³¼ ë³‘í•©
        return mergeResults(leftResult, rightResult);
    }
}</code></pre>
                    </div>
                </div>

                <!-- Dynamic Work Distribution -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">ë™ì  ì‘ì—… ë¶„ë°°</h3>
                    
                    <div class="code-block p-4 relative mb-4">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('dynamic-distribution')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="dynamic-distribution"><code class="language-java">@Service
public class DynamicWorkDistributor {
    
    private final ThreadPoolExecutor executorService;
    private final WorkQueue<AITask> workQueue;
    private final LoadBalancer loadBalancer;
    
    public DynamicWorkDistributor() {
        this.executorService = new ThreadPoolExecutor(
            10, 50,
            60L, TimeUnit.SECONDS,
            new LinkedBlockingQueue<>(100),
            new ThreadFactoryBuilder()
                .setNameFormat("ai-worker-%d")
                .build()
        );
        
        // ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
        executorService.prestartAllCoreThreads();
    }
    
    public void distributeWork(List<AITask> tasks) {
        // ì‘ì—… ë³µì¡ë„ì— ë”°ë¼ ìš°ì„ ìˆœìœ„ ì„¤ì •
        PriorityQueue<AITask> prioritizedTasks = new PriorityQueue<>(
            Comparator.comparing(AITask::getComplexity).reversed()
        );
        prioritizedTasks.addAll(tasks);
        
        // ë™ì  ì›Œì»¤ í• ë‹¹
        while (!prioritizedTasks.isEmpty()) {
            AITask task = prioritizedTasks.poll();
            
            // í˜„ì¬ ë¶€í•˜ ìƒíƒœ í™•ì¸
            WorkerNode bestWorker = loadBalancer.selectWorker(
                task.getRequiredResources()
            );
            
            CompletableFuture<TaskResult> future = CompletableFuture
                .supplyAsync(() -> bestWorker.execute(task), executorService)
                .orTimeout(task.getTimeout(), TimeUnit.SECONDS);
            
            // ì‹¤íŒ¨ ì‹œ ì¬í• ë‹¹
            future.exceptionally(ex -> {
                log.warn("Task failed, redistributing: {}", task.getId());
                redistributeTask(task);
                return null;
            });
        }
    }
    
    // ì ì‘í˜• ìŠ¤ë ˆë“œ í’€ í¬ê¸° ì¡°ì •
    @Scheduled(fixedDelay = 5000)
    public void adjustPoolSize() {
        int activeCount = executorService.getActiveCount();
        int queueSize = executorService.getQueue().size();
        double cpuUsage = getCpuUsage();
        
        if (queueSize > 50 && cpuUsage < 0.7) {
            // ëŒ€ê¸° ì‘ì—…ì´ ë§ê³  CPU ì—¬ìœ ê°€ ìˆìœ¼ë©´ ìŠ¤ë ˆë“œ ì¦ê°€
            int newSize = Math.min(
                executorService.getMaximumPoolSize(),
                executorService.getCorePoolSize() + 5
            );
            executorService.setCorePoolSize(newSize);
            log.info("Increased pool size to: {}", newSize);
            
        } else if (queueSize < 10 && activeCount < executorService.getCorePoolSize() / 2) {
            // ëŒ€ê¸° ì‘ì—…ì´ ì ê³  í™œì„± ìŠ¤ë ˆë“œê°€ ì ìœ¼ë©´ ìŠ¤ë ˆë“œ ê°ì†Œ
            int newSize = Math.max(
                10,
                executorService.getCorePoolSize() - 5
            );
            executorService.setCorePoolSize(newSize);
            log.info("Decreased pool size to: {}", newSize);
        }
    }
}</code></pre>
                    </div>
                </div>

                <!-- Result Aggregation -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">ê²°ê³¼ ì§‘ê³„ ì „ëµ</h3>
                    
                    <div class="code-block p-4 relative">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('result-aggregation')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="result-aggregation"><code class="language-java">@Component
public class ResultAggregator {
    
    // íˆ¬í‘œ ê¸°ë°˜ ì§‘ê³„
    public <T> T aggregateByVoting(List<T> results) {
        Map<T, Long> voteCounts = results.stream()
            .collect(Collectors.groupingBy(
                Function.identity(),
                Collectors.counting()
            ));
        
        return voteCounts.entrySet().stream()
            .max(Map.Entry.comparingByValue())
            .map(Map.Entry::getKey)
            .orElseThrow();
    }
    
    // ê°€ì¤‘ì¹˜ ê¸°ë°˜ ì§‘ê³„
    public AggregatedResult aggregateWithWeights(
            List<WeightedResult> results) {
        
        // ì‹ ë¢°ë„ ê¸°ë°˜ ê°€ì¤‘ì¹˜ ê³„ì‚°
        double totalWeight = results.stream()
            .mapToDouble(r -> r.getConfidence())
            .sum();
        
        Map<String, Double> weightedScores = new HashMap<>();
        
        for (WeightedResult result : results) {
            double normalizedWeight = result.getConfidence() / totalWeight;
            
            result.getScores().forEach((key, value) -> 
                weightedScores.merge(key, value * normalizedWeight, Double::sum)
            );
        }
        
        return AggregatedResult.builder()
            .aggregatedScores(weightedScores)
            .participantCount(results.size())
            .confidenceLevel(calculateOverallConfidence(results))
            .build();
    }
    
    // ìŠ¤íŠ¸ë¦¬ë° ì§‘ê³„
    public Flux<IntermediateResult> streamingAggregate(
            List<Flux<PartialResult>> resultStreams) {
        
        return Flux.merge(resultStreams)
            .buffer(Duration.ofMillis(100))
            .map(batch -> {
                // ë°°ì¹˜ë³„ ì¤‘ê°„ ê²°ê³¼ ìƒì„±
                IntermediateResult intermediate = IntermediateResult.builder()
                    .timestamp(Instant.now())
                    .partialResults(batch)
                    .progress(calculateProgress(batch))
                    .build();
                
                // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì „ì†¡
                publishUpdate(intermediate);
                
                return intermediate;
            });
    }
    
    // ì•™ìƒë¸” ì§‘ê³„
    public EnsembleResult ensembleAggregate(
            Map<String, ModelResult> modelResults) {
        
        // ê° ëª¨ë¸ì˜ ê°•ì ì„ í™œìš©í•œ ì•™ìƒë¸”
        String bestAccuracyModel = findBestModel(modelResults, "accuracy");
        String bestSpeedModel = findBestModel(modelResults, "speed");
        String bestCreativityModel = findBestModel(modelResults, "creativity");
        
        // ìƒí™©ë³„ ìµœì  ê²°ê³¼ ì„ íƒ
        return EnsembleResult.builder()
            .factualAnswer(modelResults.get(bestAccuracyModel).getContent())
            .creativeAnswer(modelResults.get(bestCreativityModel).getContent())
            .quickAnswer(modelResults.get(bestSpeedModel).getContent())
            .consensusAnswer(buildConsensus(modelResults))
            .confidence(calculateEnsembleConfidence(modelResults))
            .build();
    }
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Real-World Examples -->
            <section class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">ì‹¤ì „ ì˜ˆì œ</h2>
                
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">ì‹¤ì‹œê°„ ë²ˆì—­ ì‹œìŠ¤í…œ</h3>
                    
                    <div class="code-block p-4 relative">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('translation-system')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="translation-system"><code class="language-java">@Service
public class RealTimeTranslationService {
    
    private final ParallelAIProcessor parallelProcessor;
    private final Map<String, ChatClient> languageClients;
    
    public TranslationResult translateToMultipleLanguages(
            String sourceText, 
            String sourceLanguage,
            List<String> targetLanguages) {
        
        // ê° ì–¸ì–´ë³„ ë²ˆì—­ ë³‘ë ¬ ì‹¤í–‰
        Map<String, CompletableFuture<Translation>> translationFutures = 
            targetLanguages.stream()
                .collect(Collectors.toMap(
                    lang -> lang,
                    lang -> translateAsync(sourceText, sourceLanguage, lang)
                ));
        
        // ìŠ¤íŠ¸ë¦¬ë° ê²°ê³¼ ë°˜í™˜
        return TranslationResult.builder()
            .sourceText(sourceText)
            .sourceLanguage(sourceLanguage)
            .translations(collectTranslations(translationFutures))
            .qualityScores(evaluateQuality(translationFutures))
            .build();
    }
    
    private CompletableFuture<Translation> translateAsync(
            String text, 
            String sourceLang, 
            String targetLang) {
        
        return CompletableFuture.supplyAsync(() -> {
            // ë©”ì¸ ë²ˆì—­
            String mainTranslation = performTranslation(text, sourceLang, targetLang);
            
            // ë³‘ë ¬ë¡œ í’ˆì§ˆ ê²€ì¦
            CompletableFuture<Double> qualityScore = 
                CompletableFuture.supplyAsync(() -> 
                    evaluateTranslationQuality(text, mainTranslation, targetLang)
                );
            
            // ë³‘ë ¬ë¡œ ëŒ€ì²´ ë²ˆì—­ ìƒì„±
            CompletableFuture<List<String>> alternatives = 
                CompletableFuture.supplyAsync(() -> 
                    generateAlternatives(text, sourceLang, targetLang)
                );
            
            return Translation.builder()
                .targetLanguage(targetLang)
                .mainTranslation(mainTranslation)
                .alternatives(alternatives.join())
                .qualityScore(qualityScore.join())
                .timestamp(Instant.now())
                .build();
        });
    }
}

// ë³‘ë ¬ ë°ì´í„° ë¶„ì„ ì„œë¹„ìŠ¤
@Service
public class ParallelDataAnalysisService {
    
    public ComprehensiveAnalysis analyzeDataset(Dataset dataset) {
        // ë‹¤ì–‘í•œ ë¶„ì„ì„ ë³‘ë ¬ë¡œ ìˆ˜í–‰
        CompletableFuture<StatisticalAnalysis> statsF uture = 
            CompletableFuture.supplyAsync(() -> performStatisticalAnalysis(dataset));
            
        CompletableFuture<TrendAnalysis> trendFuture = 
            CompletableFuture.supplyAsync(() -> performTrendAnalysis(dataset));
            
        CompletableFuture<AnomalyDetection> anomalyFuture = 
            CompletableFuture.supplyAsync(() -> detectAnomalies(dataset));
            
        CompletableFuture<PredictiveModel> predictionFuture = 
            CompletableFuture.supplyAsync(() -> buildPredictiveModel(dataset));
        
        // ëª¨ë“  ë¶„ì„ ì™„ë£Œ ëŒ€ê¸°
        CompletableFuture<Void> allAnalyses = CompletableFuture.allOf(
            statsFuture, trendFuture, anomalyFuture, predictionFuture
        );
        
        return allAnalyses.thenApply(v -> 
            ComprehensiveAnalysis.builder()
                .statistics(statsFuture.join())
                .trends(trendFuture.join())
                .anomalies(anomalyFuture.join())
                .predictions(predictionFuture.join())
                .summary(generateExecutiveSummary(
                    statsFuture.join(),
                    trendFuture.join(),
                    anomalyFuture.join(),
                    predictionFuture.join()
                ))
                .build()
        ).join();
    }
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Performance Optimization -->
            <section class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">ì„±ëŠ¥ ìµœì í™”</h2>
                
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h3 class="text-lg font-semibold mb-3">ë³‘ë ¬ ì²˜ë¦¬ ìµœì í™” ì „ëµ</h3>
                    
                    <div class="bg-yellow-50 p-4 rounded-lg mb-4">
                        <h4 class="font-semibold mb-2">ë¦¬ì†ŒìŠ¤ ê´€ë¦¬</h4>
                        <ul class="space-y-1 text-sm">
                            <li>â€¢ ìŠ¤ë ˆë“œ í’€ í¬ê¸°ë¥¼ CPU ì½”ì–´ ìˆ˜ì— ë§ì¶° ì¡°ì •</li>
                            <li>â€¢ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ ë° ì œí•œ ì„¤ì •</li>
                            <li>â€¢ ì‘ì—… í í¬ê¸° ì œí•œìœ¼ë¡œ ë©”ëª¨ë¦¬ ì˜¤ë²„í”Œë¡œìš° ë°©ì§€</li>
                            <li>â€¢ ë°±í”„ë ˆì…”(Backpressure) ë©”ì»¤ë‹ˆì¦˜ êµ¬í˜„</li>
                        </ul>
                    </div>
                    
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold mb-2">ì‘ì—… ë¶„ë°° ì „ëµ</h4>
                        <ul class="space-y-1 text-sm">
                            <li>â€¢ ì‘ì—… í¬ê¸°ë¥¼ ê· ë“±í•˜ê²Œ ë¶„í• </li>
                            <li>â€¢ ì‘ì—… ë³µì¡ë„ì— ë”°ë¥¸ ë™ì  í• ë‹¹</li>
                            <li>â€¢ ì§€ì—­ì„±(Locality)ì„ ê³ ë ¤í•œ ë°ì´í„° ë¶„ë°°</li>
                            <li>â€¢ ì‘ì—… í›”ì¹˜ê¸°(Work Stealing) ì•Œê³ ë¦¬ì¦˜ í™œìš©</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Best Practices -->
            <section class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">ğŸ¯ Best Practices</h2>
                
                <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">ë³‘ë ¬ ì²˜ë¦¬ ì„¤ê³„ ì›ì¹™</h3>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold mb-2">ì„¤ê³„ ì›ì¹™</h4>
                            <ul class="space-y-1 text-sm">
                                <li>âœ… ì‘ì—… ê°„ ì˜ì¡´ì„± ìµœì†Œí™”</li>
                                <li>âœ… ìƒíƒœ ê³µìœ  í”¼í•˜ê³  ë¶ˆë³€ ê°ì²´ ì‚¬ìš©</li>
                                <li>âœ… ì‹¤íŒ¨ ê²©ë¦¬ ë° ë¶€ë¶„ ì„±ê³µ ì²˜ë¦¬</li>
                                <li>âœ… íƒ€ì„ì•„ì›ƒ ì„¤ì •ìœ¼ë¡œ ë¬´í•œ ëŒ€ê¸° ë°©ì§€</li>
                                <li>âœ… ì ì ˆí•œ ì‘ì—… ë‹¨ìœ„ í¬ê¸° ì„¤ì •</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold mb-2">ëª¨ë‹ˆí„°ë§ í¬ì¸íŠ¸</h4>
                            <ul class="space-y-1 text-sm">
                                <li>âœ… ìŠ¤ë ˆë“œ í’€ ì‚¬ìš©ë¥  ì¶”ì </li>
                                <li>âœ… ì‘ì—… ëŒ€ê¸° ì‹œê°„ ì¸¡ì •</li>
                                <li>âœ… ì²˜ë¦¬ëŸ‰ ë° ì§€ì—° ì‹œê°„ ëª¨ë‹ˆí„°ë§</li>
                                <li>âœ… ì‹¤íŒ¨ìœ¨ ë° ì¬ì‹œë„ íšŸìˆ˜ ì¶”ì </li>
                                <li>âœ… ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ (CPU, ë©”ëª¨ë¦¬) ê°ì‹œ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Next Steps -->
            <section class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold mb-4">ë‹¤ìŒ ë‹¨ê³„</h2>
                
                <div class="grid md:grid-cols-3 gap-4">
                    <a href="chain.html" class="block p-4 border rounded-lg hover:bg-gray-50 transition">
                        <h3 class="font-semibold text-blue-600 mb-2">Chain Workflow</h3>
                        <p class="text-sm text-gray-600">ìˆœì°¨ ì²˜ë¦¬ íŒ¨í„´ ì•Œì•„ë³´ê¸°</p>
                    </a>
                    
                    <a href="routing.html" class="block p-4 border rounded-lg hover:bg-gray-50 transition">
                        <h3 class="font-semibold text-purple-600 mb-2">Smart Routing</h3>
                        <p class="text-sm text-gray-600">ì§€ëŠ¥í˜• ë¼ìš°íŒ… íŒ¨í„´</p>
                    </a>
                    
                    <a href="../patterns.html" class="block p-4 border rounded-lg hover:bg-gray-50 transition">
                        <h3 class="font-semibold text-green-600 mb-2">íŒ¨í„´ ëª©ë¡</h3>
                        <p class="text-sm text-gray-600">ì „ì²´ íŒ¨í„´ ë³´ê¸°</p>
                    </a>
                </div>
            </section>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <script>
        function copyCode(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            navigator.clipboard.writeText(text).then(() => {
                showNotification('ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg z-50';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => {
                document.body.removeChild(notification);
            }, 2000);
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring AI ì—ì´ì „íŠ¸ êµ¬ì¶• ê°€ì´ë“œ</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .code-block { background: #2d3748; border-radius: 8px; }
        .copy-button { transition: all 0.2s ease; }
        .copy-button:hover { background-color: #4a5568; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <a href="../index.html" class="flex items-center text-xl font-bold text-gray-800">
                        <i class="fab fa-spring text-green-600 mr-2"></i>
                        Spring AI Hub
                    </a>
                    <span class="mx-3 text-gray-400">/</span>
                    <span class="text-gray-600">AI ì—ì´ì „íŠ¸ ê°€ì´ë“œ</span>
                </div>
                <a href="../index.html" class="text-blue-600 hover:text-blue-800">
                    <i class="fas fa-home"></i> í™ˆìœ¼ë¡œ
                </a>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-4xl font-bold mb-4">ğŸ¤– AI ì—ì´ì „íŠ¸ êµ¬ì¶• ê°€ì´ë“œ</h1>
            <p class="text-gray-600 mb-8">ììœ¨ì ìœ¼ë¡œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” AI ì—ì´ì „íŠ¸ë¥¼ Spring AIë¡œ êµ¬í˜„í•˜ëŠ” ë°©ë²•</p>

            <!-- Table of Contents -->
            <div class="bg-white rounded-lg shadow-sm p-6 mb-8">
                <h2 class="text-xl font-semibold mb-4">ëª©ì°¨</h2>
                <ul class="space-y-2 text-blue-600">
                    <li><a href="#agent-basics" class="hover:underline">1. AI ì—ì´ì „íŠ¸ ê¸°ì´ˆ</a></li>
                    <li><a href="#agent-architecture" class="hover:underline">2. ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜</a></li>
                    <li><a href="#simple-agent" class="hover:underline">3. ë‹¨ìˆœ ì—ì´ì „íŠ¸ êµ¬í˜„</a></li>
                    <li><a href="#multi-agent" class="hover:underline">4. ë©€í‹° ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ</a></li>
                    <li><a href="#memory-planning" class="hover:underline">5. ë©”ëª¨ë¦¬ì™€ ê³„íš</a></li>
                    <li><a href="#production" class="hover:underline">6. í”„ë¡œë•ì…˜ ê³ ë ¤ì‚¬í•­</a></li>
                </ul>
            </div>

            <!-- Section 1: Agent Basics -->
            <section id="agent-basics" class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">1. AI ì—ì´ì „íŠ¸ ê¸°ì´ˆ</h2>
                
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">AI ì—ì´ì „íŠ¸ë€?</h3>
                    <p class="mb-4">
                        AI ì—ì´ì „íŠ¸ëŠ” ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´ ììœ¨ì ìœ¼ë¡œ í–‰ë™í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. 
                        í™˜ê²½ì„ ì¸ì‹í•˜ê³ , ê³„íšì„ ì„¸ìš°ë©°, ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
                    </p>
                    
                    <div class="bg-blue-50 p-4 rounded-lg mb-4">
                        <h4 class="font-semibold mb-2">ì—ì´ì „íŠ¸ì˜ í•µì‹¬ êµ¬ì„±ìš”ì†Œ:</h4>
                        <ul class="space-y-1">
                            <li>ğŸ§  <strong>ë‘ë‡Œ (LLM)</strong>: ì¶”ë¡ ê³¼ ì˜ì‚¬ê²°ì •</li>
                            <li>ğŸ”§ <strong>ë„êµ¬</strong>: ì‹¤ì œ ì‘ì—… ìˆ˜í–‰</li>
                            <li>ğŸ’¾ <strong>ë©”ëª¨ë¦¬</strong>: ì»¨í…ìŠ¤íŠ¸ ìœ ì§€</li>
                            <li>ğŸ“‹ <strong>ê³„íš</strong>: ì‘ì—… ë‹¨ê³„ ì„¤ì •</li>
                            <li>ğŸ”„ <strong>ì‹¤í–‰ ë£¨í”„</strong>: ê´€ì°°-ì‚¬ê³ -í–‰ë™ ë°˜ë³µ</li>
                        </ul>
                    </div>

                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h4 class="font-semibold mb-2">ì—ì´ì „íŠ¸ ì‘ë™ ê³¼ì •:</h4>
                        <pre class="text-sm font-mono">1. ëª©í‘œ ìˆ˜ì‹ 
    â†“
2. í˜„ì¬ ìƒíƒœ ê´€ì°°
    â†“
3. ë‹¤ìŒ í–‰ë™ ê³„íš
    â†“
4. ë„êµ¬ ì„ íƒ ë° ì‹¤í–‰
    â†“
5. ê²°ê³¼ í‰ê°€
    â†“
6. ëª©í‘œ ë‹¬ì„±ê¹Œì§€ 2-5 ë°˜ë³µ</pre>
                    </div>
                </div>
            </section>

            <!-- Section 2: Agent Architecture -->
            <section id="agent-architecture" class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">2. ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜</h2>
                
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">ê¸°ë³¸ ì•„í‚¤í…ì²˜</h3>
                    
                    <div class="code-block p-4 relative mb-4">
                        <pre class="font-mono"><code class="language-text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Agent Controller                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Planner â”‚  â”‚ Memory  â”‚  â”‚Executor â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚            â”‚             â”‚          â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                    â”‚                        â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                 â”‚
â”‚              â”‚    LLM    â”‚                 â”‚
â”‚              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
              â”‚    Tools    â”‚
              â”‚ â€¢ Database  â”‚
              â”‚ â€¢ APIs      â”‚
              â”‚ â€¢ Files     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
                    </div>

                    <h3 class="text-lg font-semibold mb-3">Spring AI ì—ì´ì „íŠ¸ ì¸í„°í˜ì´ìŠ¤</h3>
                    
                    <div class="code-block p-4 relative">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('agent-interface')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="agent-interface"><code class="language-java">public interface Agent {
    // ì—ì´ì „íŠ¸ ì‹¤í–‰
    AgentResponse execute(AgentRequest request);
    
    // ì—ì´ì „íŠ¸ ë©”íƒ€ë°ì´í„°
    String getName();
    String getDescription();
    List&lt;String&gt; getCapabilities();
}

public interface AgentRequest {
    String getGoal();
    Map&lt;String, Object&gt; getContext();
    int getMaxIterations();
}

public interface AgentResponse {
    String getResult();
    List&lt;AgentAction&gt; getActions();
    AgentStatus getStatus();
    Map&lt;String, Object&gt; getMetadata();
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Section 3: Simple Agent -->
            <section id="simple-agent" class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">3. ë‹¨ìˆœ ì—ì´ì „íŠ¸ êµ¬í˜„</h2>
                
                <!-- Basic Agent -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">ê¸°ë³¸ ì—ì´ì „íŠ¸</h3>
                    
                    <div class="code-block p-4 relative mb-4">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('basic-agent')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="basic-agent"><code class="language-java">@Component
@Slf4j
public class SimpleTaskAgent implements Agent {
    
    private final ChatClient chatClient;
    private final List&lt;Object&gt; tools;
    private final AgentMemory memory;
    
    public SimpleTaskAgent(ChatClient.Builder chatClientBuilder, 
                          List&lt;Object&gt; tools) {
        this.chatClient = chatClientBuilder
            .defaultOptions(OpenAiChatOptions.builder()
                .withModel("gpt-4o")
                .withTemperature(0.3f)
                .build())
            .defaultFunctions(extractToolNames(tools))
            .build();
        this.tools = tools;
        this.memory = new InMemoryAgentMemory();
    }
    
    @Override
    public AgentResponse execute(AgentRequest request) {
        log.info("Agent executing goal: {}", request.getGoal());
        
        List&lt;AgentAction&gt; actions = new ArrayList&lt;&gt;();
        String currentGoal = request.getGoal();
        int iteration = 0;
        
        while (iteration &lt; request.getMaxIterations()) {
            iteration++;
            
            // 1. í˜„ì¬ ìƒíƒœ ê´€ì°°
            String observation = observeCurrentState(request, actions);
            
            // 2. ë‹¤ìŒ í–‰ë™ ê²°ì •
            AgentThought thought = think(currentGoal, observation);
            
            if (thought.isGoalAchieved()) {
                return AgentResponse.success(
                    thought.getFinalAnswer(),
                    actions
                );
            }
            
            // 3. í–‰ë™ ì‹¤í–‰
            AgentAction action = executeAction(thought);
            actions.add(action);
            
            // 4. ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸
            memory.remember(thought, action);
        }
        
        return AgentResponse.partial(
            "ìµœëŒ€ ë°˜ë³µ íšŸìˆ˜ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤.",
            actions
        );
    }
    
    private AgentThought think(String goal, String observation) {
        String prompt = """
            ëª©í‘œ: {goal}
            
            í˜„ì¬ ê´€ì°°: {observation}
            
            ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬: {tools}
            
            ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”:
            1. ëª©í‘œê°€ ë‹¬ì„±ë˜ì—ˆë‹¤ë©´ "COMPLETE:" ë¡œ ì‹œì‘í•˜ì—¬ ìµœì¢… ë‹µë³€ì„ ì œê³µ
            2. ì¶”ê°€ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤ë©´ "ACTION:" ìœ¼ë¡œ ì‹œì‘í•˜ì—¬ ë‹¤ìŒ í–‰ë™ì„ ì„¤ëª…
            
            í˜•ì‹:
            THOUGHT: í˜„ì¬ ìƒí™© ë¶„ì„
            ACTION: ë„êµ¬ì´ë¦„(íŒŒë¼ë¯¸í„°) ë˜ëŠ” COMPLETE: ìµœì¢…ë‹µë³€
            """;
        
        String response = chatClient.prompt()
            .user(u -> u.text(prompt)
                .param("goal", goal)
                .param("observation", observation)
                .param("tools", formatTools(tools)))
            .call()
            .content();
        
        return parseThought(response);
    }
    
    private AgentAction executeAction(AgentThought thought) {
        try {
            // ë„êµ¬ ì‹¤í–‰
            Object result = chatClient.prompt()
                .user(thought.getAction())
                .call()
                .content();
            
            return AgentAction.success(
                thought.getAction(),
                result
            );
        } catch (Exception e) {
            log.error("Action execution failed", e);
            return AgentAction.failure(
                thought.getAction(),
                e.getMessage()
            );
        }
    }
}

// ë©”ëª¨ë¦¬ êµ¬í˜„
@Component
public class InMemoryAgentMemory implements AgentMemory {
    
    private final List&lt;MemoryEntry&gt; shortTermMemory = new ArrayList&lt;&gt;();
    private final Map&lt;String, Object&gt; longTermMemory = new HashMap&lt;&gt;();
    
    @Override
    public void remember(AgentThought thought, AgentAction action) {
        shortTermMemory.add(new MemoryEntry(
            thought,
            action,
            Instant.now()
        ));
        
        // ì¤‘ìš”í•œ ì •ë³´ëŠ” ì¥ê¸° ë©”ëª¨ë¦¬ë¡œ
        if (action.isSuccess() && action.hasImportantResult()) {
            longTermMemory.put(
                action.getKey(),
                action.getResult()
            );
        }
    }
    
    @Override
    public String getRelevantMemory(String context) {
        return shortTermMemory.stream()
            .filter(entry -> isRelevant(entry, context))
            .map(MemoryEntry::toString)
            .collect(Collectors.joining("\n"));
    }
}</code></pre>
                    </div>
                </div>

                <!-- ReAct Agent -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">ReAct íŒ¨í„´ ì—ì´ì „íŠ¸</h3>
                    
                    <div class="code-block p-4 relative">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('react-agent')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="react-agent"><code class="language-java">@Service
public class ReActAgent implements Agent {
    
    private static final String REACT_PROMPT = """
        ë‹¹ì‹ ì€ ReAct (Reasoning and Acting) ë°©ì‹ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.
        
        ëª©í‘œ: {goal}
        
        ì´ì „ ë‹¨ê³„ë“¤:
        {history}
        
        ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬:
        {tools}
        
        ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•˜ì„¸ìš”:
        Thought: í˜„ì¬ ìƒí™©ê³¼ ë‹¤ìŒì— í•´ì•¼ í•  ì¼ì— ëŒ€í•œ ì¶”ë¡ 
        Action: ë„êµ¬_ì´ë¦„[íŒŒë¼ë¯¸í„°]
        
        ëª©í‘œê°€ ë‹¬ì„±ë˜ì—ˆë‹¤ë©´:
        Thought: ëª©í‘œ ë‹¬ì„± í™•ì¸ ë° ê²°ê³¼ ìš”ì•½
        Answer: ìµœì¢… ë‹µë³€
        """;
    
    private final ChatClient chatClient;
    private final ToolRegistry toolRegistry;
    private final List&lt;ReActStep&gt; history = new ArrayList&lt;&gt;();
    
    @Override
    public AgentResponse execute(AgentRequest request) {
        String goal = request.getGoal();
        int maxSteps = request.getMaxIterations();
        
        for (int step = 0; step &lt; maxSteps; step++) {
            // ReAct ë‹¨ê³„ ì‹¤í–‰
            ReActStep reactStep = performReActStep(goal);
            history.add(reactStep);
            
            if (reactStep.isComplete()) {
                return AgentResponse.success(
                    reactStep.getAnswer(),
                    convertToActions(history)
                );
            }
            
            // ë„êµ¬ ì‹¤í–‰
            ToolResult toolResult = executeToolAction(reactStep.getAction());
            reactStep.setObservation(toolResult.getOutput());
            
            // ì‹¤íŒ¨ ì²˜ë¦¬
            if (!toolResult.isSuccess()) {
                return handleFailure(toolResult, history);
            }
        }
        
        return AgentResponse.maxIterationsReached(history);
    }
    
    private ReActStep performReActStep(String goal) {
        String prompt = REACT_PROMPT
            .replace("{goal}", goal)
            .replace("{history}", formatHistory())
            .replace("{tools}", toolRegistry.getToolDescriptions());
        
        String response = chatClient.prompt()
            .user(prompt)
            .call()
            .content();
        
        return parseReActResponse(response);
    }
    
    private ToolResult executeToolAction(String action) {
        // ë„êµ¬ ì´ë¦„ê³¼ íŒŒë¼ë¯¸í„° ì¶”ì¶œ
        Pattern pattern = Pattern.compile("(\\w+)\\[(.*)\\]");
        Matcher matcher = pattern.matcher(action);
        
        if (matcher.find()) {
            String toolName = matcher.group(1);
            String params = matcher.group(2);
            
            Tool tool = toolRegistry.getTool(toolName);
            if (tool != null) {
                return tool.execute(parseParameters(params));
            }
        }
        
        return ToolResult.error("Invalid action format: " + action);
    }
    
    private String formatHistory() {
        return history.stream()
            .map(step -> String.format(
                "Thought: %s\nAction: %s\nObservation: %s",
                step.getThought(),
                step.getAction(),
                step.getObservation()
            ))
            .collect(Collectors.joining("\n\n"));
    }
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Section 4: Multi-Agent System -->
            <section id="multi-agent" class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">4. ë©€í‹° ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ</h2>
                
                <!-- Orchestrator -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">ì—ì´ì „íŠ¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°</h3>
                    
                    <div class="code-block p-4 relative mb-4">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('agent-orchestrator')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="agent-orchestrator"><code class="language-java">@Service
@Slf4j
public class MultiAgentOrchestrator {
    
    private final Map&lt;String, Agent&gt; agents;
    private final ChatClient routingClient;
    private final AgentCommunicationBus communicationBus;
    
    public MultiAgentOrchestrator(ChatClient.Builder builder) {
        this.agents = new HashMap&lt;&gt;();
        this.routingClient = builder.build();
        this.communicationBus = new AgentCommunicationBus();
        
        // ì—ì´ì „íŠ¸ ë“±ë¡
        registerAgent("research", new ResearchAgent());
        registerAgent("analysis", new AnalysisAgent());
        registerAgent("writer", new WriterAgent());
        registerAgent("reviewer", new ReviewerAgent());
    }
    
    public OrchestratorResponse executeTask(String task) {
        log.info("Orchestrator received task: {}", task);
        
        // 1. ì‘ì—… ë¶„ì„ ë° ê³„íš
        TaskPlan plan = analyzeAndPlan(task);
        
        // 2. ì—ì´ì „íŠ¸ í• ë‹¹
        Map&lt;String, AgentAssignment&gt; assignments = assignAgents(plan);
        
        // 3. ì‘ì—… ì‹¤í–‰
        return executeWorkflow(plan, assignments);
    }
    
    private TaskPlan analyzeAndPlan(String task) {
        String planPrompt = """
            ì‘ì—…: {task}
            
            ì‚¬ìš© ê°€ëŠ¥í•œ ì—ì´ì „íŠ¸:
            {agents}
            
            ì´ ì‘ì—…ì„ ì™„ë£Œí•˜ê¸° ìœ„í•œ ë‹¨ê³„ë³„ ê³„íšì„ ì„¸ìš°ì„¸ìš”.
            ê° ë‹¨ê³„ì—ì„œ ì–´ë–¤ ì—ì´ì „íŠ¸ë¥¼ ì‚¬ìš©í• ì§€ ëª…ì‹œí•˜ì„¸ìš”.
            
            í˜•ì‹:
            1. [ì—ì´ì „íŠ¸ëª…] ìˆ˜í–‰í•  ì‘ì—…
            2. [ì—ì´ì „íŠ¸ëª…] ìˆ˜í–‰í•  ì‘ì—…
            ...
            """;
        
        String planResponse = routingClient.prompt()
            .user(u -> u.text(planPrompt)
                .param("task", task)
                .param("agents", describeAgents()))
            .call()
            .content();
        
        return parsePlan(planResponse);
    }
    
    // ë³‘ë ¬ ì‹¤í–‰
    public OrchestratorResponse executeParallel(List&lt;String&gt; tasks) {
        List&lt;CompletableFuture&lt;AgentResponse&gt;&gt; futures = tasks.stream()
            .map(task -> CompletableFuture.supplyAsync(() -> 
                executeTask(task)
            ))
            .toList();
        
        List&lt;AgentResponse&gt; results = CompletableFuture.allOf(
            futures.toArray(new CompletableFuture[0])
        ).thenApply(v -> futures.stream()
            .map(CompletableFuture::join)
            .toList()
        ).join();
        
        return combineResults(results);
    }
    
    // ìˆœì°¨ ì‹¤í–‰ (Chain)
    public OrchestratorResponse executeChain(List&lt;ChainStep&gt; steps) {
        Object previousResult = null;
        List&lt;AgentResponse&gt; responses = new ArrayList&lt;&gt;();
        
        for (ChainStep step : steps) {
            Agent agent = agents.get(step.getAgentName());
            
            AgentRequest request = AgentRequest.builder()
                .goal(step.getGoal())
                .context(Map.of("previousResult", previousResult))
                .build();
            
            AgentResponse response = agent.execute(request);
            responses.add(response);
            
            if (!response.isSuccess()) {
                return OrchestratorResponse.failure(
                    "Chain failed at step: " + step.getAgentName()
                );
            }
            
            previousResult = response.getResult();
        }
        
        return OrchestratorResponse.success(previousResult, responses);
    }
}

// ì „ë¬¸ ì—ì´ì „íŠ¸ ì˜ˆì‹œ
@Component
public class ResearchAgent extends BaseAgent {
    
    @Override
    public String getName() {
        return "Research Agent";
    }
    
    @Override
    public String getDescription() {
        return "ì›¹ ê²€ìƒ‰, ë¬¸ì„œ ë¶„ì„, ì •ë³´ ìˆ˜ì§‘ ì „ë¬¸";
    }
    
    @Override
    protected String getSystemPrompt() {
        return """
            ë‹¹ì‹ ì€ ì—°êµ¬ ì „ë¬¸ ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.
            ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¶œì²˜ì—ì„œ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê³  ê²€ì¦í•©ë‹ˆë‹¤.
            ëª¨ë“  ì •ë³´ì—ëŠ” ì¶œì²˜ë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤.
            """;
    }
    
    @Override
    protected List&lt;String&gt; getToolNames() {
        return List.of(
            "webSearch",
            "academicSearch",
            "documentAnalysis",
            "factCheck"
        );
    }
}

@Component  
public class AnalysisAgent extends BaseAgent {
    
    @Override
    public String getName() {
        return "Analysis Agent";
    }
    
    @Override
    protected String getSystemPrompt() {
        return """
            ë‹¹ì‹ ì€ ë°ì´í„° ë¶„ì„ ì „ë¬¸ ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.
            ì£¼ì–´ì§„ ì •ë³´ë¥¼ ë¶„ì„í•˜ì—¬ í†µì°°ë ¥ ìˆëŠ” ê²°ë¡ ì„ ë„ì¶œí•©ë‹ˆë‹¤.
            í†µê³„ì  ê·¼ê±°ì™€ ë…¼ë¦¬ì  ì¶”ë¡ ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
            """;
    }
    
    @Override
    protected List&lt;String&gt; getToolNames() {
        return List.of(
            "statisticalAnalysis",
            "dataVisualization",
            "trendAnalysis",
            "comparativeAnalysis"
        );
    }
}</code></pre>
                    </div>
                </div>

                <!-- Communication -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">ì—ì´ì „íŠ¸ ê°„ í†µì‹ </h3>
                    
                    <div class="code-block p-4 relative">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('agent-communication')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="agent-communication"><code class="language-java">@Component
public class AgentCommunicationBus {
    
    private final Map&lt;String, BlockingQueue&lt;AgentMessage&gt;&gt; messageQueues;
    private final Map&lt;String, AgentProfile&gt; agentProfiles;
    
    public AgentCommunicationBus() {
        this.messageQueues = new ConcurrentHashMap&lt;&gt;();
        this.agentProfiles = new ConcurrentHashMap&lt;&gt;();
    }
    
    // ì—ì´ì „íŠ¸ ë“±ë¡
    public void registerAgent(String agentId, AgentProfile profile) {
        messageQueues.put(agentId, new LinkedBlockingQueue&lt;&gt;());
        agentProfiles.put(agentId, profile);
        log.info("Agent registered: {}", agentId);
    }
    
    // ë©”ì‹œì§€ ì „ì†¡
    public void sendMessage(AgentMessage message) {
        String recipientId = message.getRecipientId();
        BlockingQueue&lt;AgentMessage&gt; queue = messageQueues.get(recipientId);
        
        if (queue != null) {
            try {
                queue.offer(message, 5, TimeUnit.SECONDS);
                log.debug("Message sent from {} to {}", 
                    message.getSenderId(), recipientId);
            } catch (InterruptedException e) {
                log.error("Failed to send message", e);
            }
        }
    }
    
    // ë¸Œë¡œë“œìºìŠ¤íŠ¸
    public void broadcast(String senderId, String content, MessageType type) {
        agentProfiles.keySet().stream()
            .filter(id -> !id.equals(senderId))
            .forEach(recipientId -> {
                AgentMessage message = AgentMessage.builder()
                    .senderId(senderId)
                    .recipientId(recipientId)
                    .content(content)
                    .type(type)
                    .timestamp(Instant.now())
                    .build();
                sendMessage(message);
            });
    }
    
    // ë©”ì‹œì§€ ìˆ˜ì‹ 
    public AgentMessage receiveMessage(String agentId, long timeout, TimeUnit unit) {
        BlockingQueue&lt;AgentMessage&gt; queue = messageQueues.get(agentId);
        if (queue != null) {
            try {
                return queue.poll(timeout, unit);
            } catch (InterruptedException e) {
                log.error("Message receive interrupted", e);
            }
        }
        return null;
    }
}

// í˜‘ì—… í”„ë¡œí† ì½œ
@Component
public class CollaborationProtocol {
    
    // ì‘ì—… ìœ„ì„
    public DelegationResult delegateTask(
            String fromAgent, 
            String toAgent, 
            Task task) {
        
        AgentMessage delegation = AgentMessage.builder()
            .senderId(fromAgent)
            .recipientId(toAgent)
            .type(MessageType.TASK_DELEGATION)
            .content(task.toJson())
            .metadata(Map.of(
                "priority", task.getPriority(),
                "deadline", task.getDeadline()
            ))
            .build();
        
        communicationBus.sendMessage(delegation);
        
        // ì‘ë‹µ ëŒ€ê¸°
        AgentMessage response = communicationBus.receiveMessage(
            fromAgent, 30, TimeUnit.SECONDS
        );
        
        if (response != null && response.getType() == MessageType.TASK_ACCEPTED) {
            return DelegationResult.accepted(response.getMetadata());
        }
        
        return DelegationResult.rejected("No response or task rejected");
    }
    
    // ì •ë³´ ìš”ì²­
    public Information requestInformation(
            String requestingAgent,
            String providerAgent,
            String query) {
        
        AgentMessage request = AgentMessage.builder()
            .senderId(requestingAgent)
            .recipientId(providerAgent)
            .type(MessageType.INFORMATION_REQUEST)
            .content(query)
            .build();
        
        communicationBus.sendMessage(request);
        
        AgentMessage response = communicationBus.receiveMessage(
            requestingAgent, 10, TimeUnit.SECONDS
        );
        
        if (response != null) {
            return Information.fromJson(response.getContent());
        }
        
        return Information.notAvailable();
    }
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Section 5: Memory and Planning -->
            <section id="memory-planning" class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">5. ë©”ëª¨ë¦¬ì™€ ê³„íš</h2>
                
                <!-- Memory System -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">ê³ ê¸‰ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ</h3>
                    
                    <div class="code-block p-4 relative mb-4">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('advanced-memory')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="advanced-memory"><code class="language-java">@Component
public class HierarchicalAgentMemory implements AgentMemory {
    
    // ì‘ì—… ë©”ëª¨ë¦¬ (í˜„ì¬ ì‘ì—…)
    private final WorkingMemory workingMemory;
    
    // ë‹¨ê¸° ë©”ëª¨ë¦¬ (ìµœê·¼ ìƒí˜¸ì‘ìš©)
    private final ShortTermMemory shortTermMemory;
    
    // ì¥ê¸° ë©”ëª¨ë¦¬ (ì¤‘ìš”í•œ ì •ë³´)
    private final LongTermMemory longTermMemory;
    
    // ì—í”¼ì†Œë“œ ë©”ëª¨ë¦¬ (ê²½í—˜)
    private final EpisodicMemory episodicMemory;
    
    public HierarchicalAgentMemory(VectorStore vectorStore) {
        this.workingMemory = new WorkingMemory(10); // 10ê°œ í•­ëª©
        this.shortTermMemory = new ShortTermMemory(100); // 100ê°œ í•­ëª©
        this.longTermMemory = new LongTermMemory(vectorStore);
        this.episodicMemory = new EpisodicMemory();
    }
    
    @Override
    public void store(MemoryItem item) {
        // ì¤‘ìš”ë„ì— ë”°ë¼ ì €ì¥ ìœ„ì¹˜ ê²°ì •
        if (item.getImportance() &gt; 0.8) {
            longTermMemory.store(item);
        }
        
        shortTermMemory.store(item);
        
        if (item.isCurrentlyRelevant()) {
            workingMemory.store(item);
        }
        
        // ê²½í—˜ìœ¼ë¡œ ì €ì¥
        if (item.isExperience()) {
            episodicMemory.store(item.toEpisode());
        }
    }
    
    @Override
    public List&lt;MemoryItem&gt; retrieve(String query, MemoryContext context) {
        List&lt;MemoryItem&gt; results = new ArrayList&lt;&gt;();
        
        // 1. ì‘ì—… ë©”ëª¨ë¦¬ì—ì„œ ê²€ìƒ‰
        results.addAll(workingMemory.retrieveAll());
        
        // 2. ë‹¨ê¸° ë©”ëª¨ë¦¬ì—ì„œ ê´€ë ¨ í•­ëª©
        results.addAll(shortTermMemory.retrieve(query, 5));
        
        // 3. ì¥ê¸° ë©”ëª¨ë¦¬ì—ì„œ ì‹œë§¨í‹± ê²€ìƒ‰
        results.addAll(longTermMemory.semanticSearch(query, 10));
        
        // 4. ì—í”¼ì†Œë“œ ë©”ëª¨ë¦¬ì—ì„œ ìœ ì‚¬ ê²½í—˜
        results.addAll(episodicMemory.findSimilarEpisodes(context, 3));
        
        return consolidateAndRank(results, query);
    }
    
    // ë©”ëª¨ë¦¬ í†µí•© ë° ì •ë¦¬
    @Scheduled(fixedDelay = 3600000) // 1ì‹œê°„ë§ˆë‹¤
    public void consolidateMemory() {
        // ë‹¨ê¸° -> ì¥ê¸° ë©”ëª¨ë¦¬ ì´ë™
        List&lt;MemoryItem&gt; importantItems = shortTermMemory.getItemsAboveImportance(0.7);
        importantItems.forEach(longTermMemory::store);
        
        // ì˜¤ë˜ëœ í•­ëª© ì •ë¦¬
        workingMemory.evictOldest();
        shortTermMemory.evictLeastUsed();
        
        // ë©”ëª¨ë¦¬ ì••ì¶•
        episodicMemory.compressOldEpisodes();
    }
}

// ê³„íš ì‹œìŠ¤í…œ
@Component
public class AdaptivePlanner {
    
    private final ChatClient planningClient;
    private final PlanValidator validator;
    private final PlanOptimizer optimizer;
    
    public Plan createPlan(String goal, AgentContext context) {
        // 1. ì´ˆê¸° ê³„íš ìƒì„±
        Plan initialPlan = generateInitialPlan(goal, context);
        
        // 2. ê³„íš ê²€ì¦
        ValidationResult validation = validator.validate(initialPlan);
        if (!validation.isValid()) {
            initialPlan = refinePlan(initialPlan, validation.getIssues());
        }
        
        // 3. ê³„íš ìµœì í™”
        Plan optimizedPlan = optimizer.optimize(initialPlan);
        
        // 4. ëŒ€ì•ˆ ê³„íš ìƒì„±
        List&lt;Plan&gt; alternatives = generateAlternatives(optimizedPlan);
        
        return selectBestPlan(optimizedPlan, alternatives, context);
    }
    
    private Plan generateInitialPlan(String goal, AgentContext context) {
        String planPrompt = """
            ëª©í‘œ: {goal}
            
            ì»¨í…ìŠ¤íŠ¸:
            - ì‚¬ìš© ê°€ëŠ¥í•œ ë¦¬ì†ŒìŠ¤: {resources}
            - ì œì•½ ì‚¬í•­: {constraints}
            - ì´ì „ ê²½í—˜: {experience}
            
            ë‹¨ê³„ë³„ ê³„íšì„ ìƒì„±í•˜ì„¸ìš”:
            1. ê° ë‹¨ê³„ëŠ” êµ¬ì²´ì ì´ê³  ì‹¤í–‰ ê°€ëŠ¥í•´ì•¼ í•¨
            2. ì˜ì¡´ì„±ì„ ëª…ì‹œ
            3. ì˜ˆìƒ ì‹œê°„ê³¼ ë¦¬ì†ŒìŠ¤ í¬í•¨
            """;
        
        String planResponse = planningClient.prompt()
            .user(u -> u.text(planPrompt)
                .param("goal", goal)
                .param("resources", context.getResources())
                .param("constraints", context.getConstraints())
                .param("experience", context.getRelevantExperience()))
            .call()
            .content();
        
        return parsePlan(planResponse);
    }
    
    // ë™ì  ì¬ê³„íš
    public Plan replan(Plan currentPlan, ExecutionFeedback feedback) {
        if (feedback.isOnTrack()) {
            return currentPlan;
        }
        
        // ì‹¤íŒ¨í•œ ë‹¨ê³„ ë¶„ì„
        PlanStep failedStep = feedback.getFailedStep();
        String failureReason = feedback.getFailureReason();
        
        // ì¬ê³„íš ì „ëµ ì„ íƒ
        ReplanningStrategy strategy = selectStrategy(failureReason);
        
        return switch (strategy) {
            case RETRY_WITH_MODIFICATION -> modifyAndRetry(currentPlan, failedStep);
            case SKIP_AND_CONTINUE -> skipStep(currentPlan, failedStep);
            case ALTERNATIVE_PATH -> findAlternativePath(currentPlan, failedStep);
            case COMPLETE_REPLAN -> createPlan(currentPlan.getGoal(), feedback.getContext());
        };
    }
}</code></pre>
                    </div>
                </div>

                <!-- Learning System -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">í•™ìŠµ ì‹œìŠ¤í…œ</h3>
                    
                    <div class="code-block p-4 relative">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('learning-system')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="learning-system"><code class="language-java">@Component
public class AgentLearningSystem {
    
    private final ExperienceRepository experienceRepo;
    private final PerformanceAnalyzer analyzer;
    private final StrategyOptimizer optimizer;
    
    // ê²½í—˜ì—ì„œ í•™ìŠµ
    public void learnFromExperience(AgentExecution execution) {
        // 1. ì‹¤í–‰ ê²°ê³¼ ë¶„ì„
        PerformanceMetrics metrics = analyzer.analyze(execution);
        
        // 2. ì„±ê³µ/ì‹¤íŒ¨ íŒ¨í„´ ì¶”ì¶œ
        List&lt;Pattern&gt; patterns = extractPatterns(execution, metrics);
        
        // 3. ì „ëµ ì—…ë°ì´íŠ¸
        patterns.forEach(pattern -> {
            if (pattern.isSuccessful()) {
                reinforceStrategy(pattern);
            } else {
                weakenStrategy(pattern);
            }
        });
        
        // 4. ê²½í—˜ ì €ì¥
        Experience experience = Experience.builder()
            .goal(execution.getGoal())
            .actions(execution.getActions())
            .outcome(execution.getOutcome())
            .metrics(metrics)
            .patterns(patterns)
            .timestamp(Instant.now())
            .build();
        
        experienceRepo.save(experience);
    }
    
    // ìœ ì‚¬ ìƒí™©ì—ì„œ ìµœì  ì „ëµ ì¶”ì²œ
    public Strategy recommendStrategy(String goal, AgentContext context) {
        // ìœ ì‚¬í•œ ê³¼ê±° ê²½í—˜ ê²€ìƒ‰
        List&lt;Experience&gt; similarExperiences = experienceRepo
            .findSimilar(goal, context, 10);
        
        if (similarExperiences.isEmpty()) {
            return Strategy.DEFAULT;
        }
        
        // ì„±ê³µë¥  ê¸°ë°˜ ì „ëµ ì„ íƒ
        Map&lt;Strategy, Double&gt; strategyScores = new HashMap&lt;&gt;();
        
        for (Experience exp : similarExperiences) {
            Strategy strategy = exp.getStrategy();
            double score = exp.getSuccessScore() * calculateSimilarity(goal, exp.getGoal());
            strategyScores.merge(strategy, score, Double::sum);
        }
        
        return strategyScores.entrySet().stream()
            .max(Map.Entry.comparingByValue())
            .map(Map.Entry::getKey)
            .orElse(Strategy.DEFAULT);
    }
    
    // ìê¸° ê°œì„ 
    @Scheduled(cron = "0 0 * * * *") // ë§¤ì‹œê°„
    public void selfImprove() {
        // 1. ìµœê·¼ ì„±ëŠ¥ ë¶„ì„
        PerformanceSummary summary = analyzer.getRecentPerformance();
        
        // 2. ê°œì„  ì˜ì—­ ì‹ë³„
        List&lt;ImprovementArea&gt; areas = identifyImprovementAreas(summary);
        
        // 3. ê° ì˜ì—­ì— ëŒ€í•œ ê°œì„  ê³„íš
        areas.forEach(area -> {
            ImprovementPlan plan = createImprovementPlan(area);
            applyImprovements(plan);
        });
        
        // 4. ë©”íƒ€ í•™ìŠµ - í•™ìŠµ ì „ëµ ìì²´ë¥¼ ê°œì„ 
        optimizeLearningStrategy(summary);
    }
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Section 6: Production Considerations -->
            <section id="production" class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">6. í”„ë¡œë•ì…˜ ê³ ë ¤ì‚¬í•­</h2>
                
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-3">ëª¨ë‹ˆí„°ë§ ë° ê´€ì°°ê°€ëŠ¥ì„±</h3>
                    
                    <div class="code-block p-4 relative mb-4">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('agent-monitoring')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="agent-monitoring"><code class="language-java">@Component
@Slf4j
public class AgentMonitor {
    
    private final MeterRegistry meterRegistry;
    private final AgentEventPublisher eventPublisher;
    
    // ì—ì´ì „íŠ¸ ì‹¤í–‰ ì¶”ì 
    @EventListener
    public void handleAgentExecution(AgentExecutionEvent event) {
        // ë©”íŠ¸ë¦­ ê¸°ë¡
        meterRegistry.counter("agent.executions",
            "agent", event.getAgentName(),
            "status", event.getStatus().toString()
        ).increment();
        
        meterRegistry.timer("agent.execution.duration",
            "agent", event.getAgentName()
        ).record(event.getDuration());
        
        // ë„êµ¬ ì‚¬ìš© ì¶”ì 
        event.getToolUsage().forEach((tool, count) -> {
            meterRegistry.counter("agent.tool.usage",
                "agent", event.getAgentName(),
                "tool", tool
            ).increment(count);
        });
        
        // ë¹„ìš© ì¶”ì 
        meterRegistry.gauge("agent.cost",
            Tags.of("agent", event.getAgentName()),
            event.getEstimatedCost()
        );
    }
    
    // ì—ì´ì „íŠ¸ ê±´ê°• ìƒíƒœ ì²´í¬
    @Component
    public class AgentHealthIndicator implements HealthIndicator {
        
        @Override
        public Health health() {
            Map&lt;String, AgentHealth&gt; agentHealthMap = checkAllAgents();
            
            boolean allHealthy = agentHealthMap.values().stream()
                .allMatch(AgentHealth::isHealthy);
            
            Health.Builder status = allHealthy ? Health.up() : Health.down();
            
            agentHealthMap.forEach((name, health) -> {
                status.withDetail(name, Map.of(
                    "status", health.getStatus(),
                    "lastActive", health.getLastActiveTime(),
                    "errorRate", health.getErrorRate(),
                    "avgResponseTime", health.getAvgResponseTime()
                ));
            });
            
            return status.build();
        }
    }
    
    // ì´ìƒ ê°ì§€
    @Scheduled(fixedRate = 60000) // 1ë¶„ë§ˆë‹¤
    public void detectAnomalies() {
        agents.forEach((name, agent) -> {
            AgentMetrics metrics = collectMetrics(agent);
            
            // ë¹„ì •ìƒì ì¸ íŒ¨í„´ ê°ì§€
            if (metrics.getErrorRate() &gt; 0.1) {
                alertManager.sendAlert(Alert.high(
                    "Agent " + name + " error rate above threshold: " + 
                    metrics.getErrorRate()
                ));
            }
            
            if (metrics.getAvgExecutionTime() &gt; Duration.ofMinutes(5)) {
                alertManager.sendAlert(Alert.medium(
                    "Agent " + name + " execution time above threshold"
                ));
            }
            
            // ë¹„ìš© ì´ìƒ ê°ì§€
            if (metrics.getHourlyCost() &gt; costThreshold) {
                alertManager.sendAlert(Alert.high(
                    "Agent " + name + " cost exceeding budget"
                ));
            }
        });
    }
}</code></pre>
                    </div>

                    <h3 class="text-lg font-semibold mb-3">ì•ˆì „ì¥ì¹˜ ë° ì œì–´</h3>
                    
                    <div class="code-block p-4 relative">
                        <button class="copy-button absolute top-2 right-2 bg-gray-600 text-white px-2 py-1 rounded text-xs" 
                                onclick="copyCode('agent-safety')">
                            <i class="fas fa-copy"></i> ë³µì‚¬
                        </button>
                        <pre id="agent-safety"><code class="language-java">@Component
public class AgentSafetyController {
    
    // ì‹¤í–‰ ì œí•œ
    private final RateLimiter rateLimiter = RateLimiter.create(10.0); // ì´ˆë‹¹ 10íšŒ
    private final CircuitBreaker circuitBreaker;
    
    // ê¶Œí•œ ê´€ë¦¬
    private final AgentPermissionManager permissionManager;
    
    // ê°ì‚¬ ë¡œê¹…
    private final AuditLogger auditLogger;
    
    public SafeExecutionResult executeWithSafety(
            Agent agent, 
            AgentRequest request) {
        
        // 1. Rate limiting
        if (!rateLimiter.tryAcquire()) {
            return SafeExecutionResult.rateLimited();
        }
        
        // 2. Circuit breaker
        if (circuitBreaker.isOpen()) {
            return SafeExecutionResult.circuitOpen();
        }
        
        // 3. ê¶Œí•œ í™•ì¸
        if (!permissionManager.hasPermission(agent, request)) {
            auditLogger.logUnauthorizedAttempt(agent, request);
            return SafeExecutionResult.unauthorized();
        }
        
        // 4. ì…ë ¥ ê²€ì¦
        ValidationResult validation = validateRequest(request);
        if (!validation.isValid()) {
            return SafeExecutionResult.invalidInput(validation.getErrors());
        }
        
        // 5. ìƒŒë“œë°•ìŠ¤ ì‹¤í–‰
        try {
            return circuitBreaker.executeSupplier(() -> {
                AgentResponse response = executeInSandbox(agent, request);
                
                // ì¶œë ¥ ê²€ì¦
                if (containsSensitiveData(response)) {
                    auditLogger.logSensitiveDataAttempt(agent, response);
                    return SafeExecutionResult.sensitiveDataBlocked();
                }
                
                auditLogger.logSuccessfulExecution(agent, request, response);
                return SafeExecutionResult.success(response);
            });
        } catch (Exception e) {
            circuitBreaker.recordFailure();
            return SafeExecutionResult.executionError(e);
        }
    }
    
    // í‚¬ ìŠ¤ìœ„ì¹˜
    @Component
    public class AgentKillSwitch {
        
        private final Map&lt;String, AtomicBoolean&gt; killSwitches = new ConcurrentHashMap&lt;&gt;();
        
        public void emergencyStop(String agentName) {
            killSwitches.computeIfAbsent(agentName, k -> new AtomicBoolean(false))
                       .set(true);
            log.warn("Emergency stop activated for agent: {}", agentName);
        }
        
        public void emergencyStopAll() {
            agents.keySet().forEach(this::emergencyStop);
            log.warn("Emergency stop activated for ALL agents");
        }
        
        public boolean isKilled(String agentName) {
            return killSwitches.getOrDefault(agentName, new AtomicBoolean(false))
                              .get();
        }
    }
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Best Practices -->
            <section class="mb-12">
                <h2 class="text-2xl font-semibold mb-4">ğŸ¯ Best Practices</h2>
                
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">ì—ì´ì „íŠ¸ ì„¤ê³„ ì›ì¹™</h3>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold mb-2">ì„¤ê³„ ì›ì¹™</h4>
                            <ul class="space-y-1 text-sm">
                                <li>âœ… ë‹¨ì¼ ì±…ì„ ì›ì¹™ ì¤€ìˆ˜</li>
                                <li>âœ… ëª…í™•í•œ ëª©í‘œ ì •ì˜</li>
                                <li>âœ… ì‹¤íŒ¨ ì²˜ë¦¬ ê³„íš ìˆ˜ë¦½</li>
                                <li>âœ… ê´€ì°°ê°€ëŠ¥ì„± ë‚´ì¥</li>
                                <li>âœ… í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ êµ¬ì¡°</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold mb-2">ìš´ì˜ ê³ ë ¤ì‚¬í•­</h4>
                            <ul class="space-y-1 text-sm">
                                <li>âœ… ë¹„ìš© ëª¨ë‹ˆí„°ë§ ë° ì œí•œ</li>
                                <li>âœ… ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì¶”ì </li>
                                <li>âœ… ê°ì‚¬ ë¡œê·¸ ìœ ì§€</li>
                                <li>âœ… ê¸´ê¸‰ ì¤‘ì§€ ë©”ì»¤ë‹ˆì¦˜</li>
                                <li>âœ… ì •ê¸°ì ì¸ ì„±ëŠ¥ ë¦¬ë·°</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Next Steps -->
            <section class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold mb-4">ë‹¤ìŒ ë‹¨ê³„</h2>
                
                <div class="grid md:grid-cols-3 gap-4">
                    <a href="patterns.html" class="block p-4 border rounded-lg hover:bg-gray-50 transition">
                        <h3 class="font-semibold text-blue-600 mb-2">ì—ì´ì „íŠ¸ íŒ¨í„´</h3>
                        <p class="text-sm text-gray-600">ê²€ì¦ëœ ì—ì´ì „íŠ¸ ì„¤ê³„ íŒ¨í„´ ëª¨ìŒ</p>
                    </a>
                    
                    <a href="monitoring.html" class="block p-4 border rounded-lg hover:bg-gray-50 transition">
                        <h3 class="font-semibold text-green-600 mb-2">ëª¨ë‹ˆí„°ë§</h3>
                        <p class="text-sm text-gray-600">ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ êµ¬ì¶•</p>
                    </a>
                    
                    <a href="examples.html" class="block p-4 border rounded-lg hover:bg-gray-50 transition">
                        <h3 class="font-semibold text-purple-600 mb-2">ì‹¤ì „ ì˜ˆì œ</h3>
                        <p class="text-sm text-gray-600">ë‹¤ì–‘í•œ ì—ì´ì „íŠ¸ êµ¬í˜„ ì˜ˆì œ</p>
                    </a>
                </div>
            </section>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <script>
        function copyCode(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            navigator.clipboard.writeText(text).then(() => {
                showNotification('ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg z-50';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => {
                document.body.removeChild(notification);
            }, 2000);
        }
    </script>
</body>
</html>